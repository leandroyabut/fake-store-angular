<div class="container">
  <div class="my-2">
    <a class="text-primary text-decoration-none p-2" routerLink="/products">
      <fa-icon icon="angle-left"></fa-icon>
      Go back
    </a>
  </div>
  <div class="row" *ngIf="!loadingProduct && product; else spinner">
    <div class="col-md-3 col-12 flex-shrink-1 m-4 text-center">
      <img [src]="product.image" [alt]="product.title" class="img-thumbnail product-img"/>
    </div>
    <div class="col-md-8 col-12 d-flex flex-column m-4">
      <h4 class="my-2">{{product.title}}</h4>
      <div class="my-1">
        <ngb-rating [max]="5" [rate]="product.rating.rate" [readonly]="true" class="text-primary fs-4"></ngb-rating>
        <span class="small fw-light mx-2">{{product.rating.count}}</span>
      </div>
      <div class="my-1">
        <span class="fs-3 fw-bold">{{product.price | currency}}</span>
      </div>
      <div class="p-2 my-3 bg-light rounded">
        {{product.description}}
      </div>
    </div>
  </div>
  <div class="py-2" *ngIf="!loadingCategory && product; else spinner">
    <div class="my-4">
      <span class="h4">More in {{product.category | titlecase}}</span>
    </div>
    <div class="row">
      <div class="col-lg-2 col-md-3 col-6 my-2" *ngFor="let catProduct of catProducts">
        <app-product-listing mode="card" [product]="catProduct"></app-product-listing>
      </div>
    </div>
  </div>
  <ng-template #spinner>
    <div class="w-100 text-center p-5">
      <span class="spinner-border text-primary"></span>
    </div>
  </ng-template>
</div>
